apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
        - name: nginx
          image: nginx:1.14.2
          ports:
            - containerPort: 80
          volumeMounts:
            - name: mtr-pull-secret-sync
              mountPath: /apps/script
            - name: mtr-pull-secret-def
              mountPath: /apps/yaml
      volumes:
        - name: mtr-pull-secret-sync
          configMap:
            name: mtr-pull-secret-sync
            defaultMode: 0744
        - name: mtr-pull-secret-def
          secret:
            secretName: mtr-pull-secret-couch
            defaultMode: 0744
---
apiVersion: v1
kind: Secret
metadata:
  name: mtr-pull-secret-couch
data:
  .dockerconfigjson: ewogICJhdXRocyI6IHsKICAgICJtdHIuZXh0ZXJuYWwub3RjLnRlbGVrb21jbG91ZC5jb20iOiB7CiAgICAgICJhdXRoIjogIkpHRndjRG81V1V4RU1FVlhUMUJJUjFwTk4wTXdPVWcyVlZaR01rOUNVMDgwVGpVME0xZE5WazFaT0VKV1EwTmFTMU5YTlVJNE9VMWFUVTQxTTB4UlF6SlNWVUpTV2tjd05WWkJSMDlQVTBkQlFVMHlNMUV6VkVOU1RGTlZWbEphU0V4RldUZFJURWxYTkVaYVFsZFFOa2RTUjFWVFVGWlZUVmhOV2xNPSIsCiAgICAgICJlbWFpbCI6ICIiCiAgICB9CiAgfQp9
type: kubernetes.io/dockerconfigjson
---
kind: Namespace
apiVersion: v1
metadata:
  name: new-mtr-secret
  labels:
    name: test
